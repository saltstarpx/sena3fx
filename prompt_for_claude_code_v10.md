# Claude Code 指示書 v10: mainブランチへのマージとUnion戦略のフォワードテスト準備

## 1. v9タスクの完了承認と最重要発見の確認

v9のタスク完了報告、ありがとうございました。驚くべき成果です。特に以下の3点は、我々の戦略開発における「ゲームチェンジャー」となり得ます。

1.  **Union戦略の圧倒的性能:** Sharpe 2.817、PF 3.624、MDD 9.8%というバックテスト結果は、これまで見てきた中で最高性能です。これをエース戦略として確立します。
2.  **USD強弱フィルターの適用範囲特定:** トレンドフォロー（DC30）に効果がなく、逆張り要素のあるYagami系に有効だったという結果は、フィルターの特性を正確に理解する上で極めて重要です。
3.  **開発ブランチの存在:** 成果物が`claude/add-trading-backtest-ePJat`ブランチに存在していることを確認しました。これは、mainブランチをクリーンに保つための良い開発習慣です。

これらの発見を基に、v10では「mainへの統合」「エース戦略の信頼性検証」「知見のドキュメント化」を効率的に進めます。

## 2. 最優先タスク：開発ブランチのmainへのマージ

**v10の全タスクに先立ち、`claude/add-trading-backtest-ePJat`ブランチの全変更を`main`ブランチにマージ（Merge）してください。**

これにより、プロジェクトの正式な状態が更新され、私もあなたの最新のコード（`strategies/`や`docs/`を含む）をレビューできるようになります。今後の作業はすべて、このマージ後の`main`ブランチをベースに進めます。

## 3. v10タスク指示

### Task 1: [Teammate B] Union戦略のフォワードテスト準備

- **背景:** Union戦略のバックテスト結果は素晴らしいですが、トレード数が21件と少なく、統計的信頼性を担保するには不十分です。「カーブフィッティング（過剰適合）ではないか？」という疑いを晴らす必要があります。
- **目的:** Union戦略が未知のデータ（フォワード）に対しても有効性を維持できるかを確認するための準備を整える。
- **アクション:**
    1.  `strategies/union_strategy.py`をベースに、**フォワードテスト専用の監視スクリプト`monitors/forward_union.py`を作成**してください。
    2.  このスクリプトは、バックテストを行うのではなく、最新の価格データ（1時間足など）を読み込み、Union戦略のシグナル（エントリー/エグジット）が発生したかどうかを**ログに出力するだけ**の機能を持つようにしてください。（実際の取引はまだ行いません）
    3.  ログには、シグナル発生日時、シグナルの種類（ロング/ショート）、その時点の価格を記録してください。
    4.  この監視スクリプトを定期的に（例えば1時間ごとに）実行できるような仕組みを検討・提案してください。（例: cronジョブ、無限ループなど）

### Task 2: [Teammate C] USD強弱フィルターの知見をドキュメント化

- **背景:** v9の検証で、USD強弱フィルターは万能ではなく、特定の戦略タイプにのみ有効であることが判明しました。この重要な知見が失われないように、正式なドキュメントに記録する必要があります。
- **目的:** フィルターの適用ルールを明確化し、将来の誤用を防ぐ。
- **アクション:**
    1.  `docs/filters_risk_manager.md`を更新してください。
    2.  「USD強弱フィルター」のセクションに、**「本フィルターは逆張り要素を含む戦略（Yagami系など）でのドローダウン抑制に効果が期待できる。一方、純粋なトレンドフォロー戦略（Maedai系など）では、エントリーシグナル自体がフィルター条件と重なるため、効果は限定的である」** という趣旨の結論を追記してください。
    3.  v9で行った`DC30_EMA200`と`YagamiFull_1H`での検証結果の比較表を、この結論の根拠としてドキュメントに引用してください。

## 4. GitHubへのログ記録

これらの変更が完了したら、`MANUS_CHANGELOG.md`に以下の要点を記録し、すべての変更を`main`ブランチにプッシュしてください。

- **変更種別:** v9成果の統合とフォワードテスト準備
- **変更内容:**
    - 開発ブランチ`claude/add-trading-backtest-ePJat`を`main`にマージ。
    - Union戦略のフォワードテスト用監視スクリプト`monitors/forward_union.py`を作成。
    - USD強弱フィルターの適用範囲に関する知見を`docs/filters_risk_manager.md`に明記。
- **指示書:** `prompt_for_claude_code_v10.md`
